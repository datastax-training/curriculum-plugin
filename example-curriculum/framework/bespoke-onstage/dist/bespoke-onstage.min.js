/*! bespoke-onstage v1.0.0-dev Â© 2017 Dan Allen, MIT License */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n=n.bespoke||(n.bespoke={}),n=n.plugins||(n.plugins={}),n.onstage=e()}}(function(){return function e(n,t,r){function o(s,l){if(!t[s]){if(!n[s]){var u="function"==typeof require&&require;if(!l&&u)return u(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=t[s]={exports:{}};n[s][0].call(a.exports,function(e){var t=n[s][1][e];return o(t?t:e)},a,a.exports,e,n,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,t){n.exports=function(){return function(e){var n=[],t=0,r=function(){n.forEach(function(n){n.postMessage(["CURSOR",e.slide()+1+"."+t].join(" "),"*")})},o=function(n){return e.slides[n].querySelectorAll(".bespoke-bullet").length},i=function(e,n){return o(e)>n},s=function(){for(var n=e.slides[e.slide()].querySelectorAll(".bespoke-bullet"),t=0,r=n.length;t<r;t++)if(n[t].classList.contains("bespoke-bullet-current"))return t;return 0},l=function(o){var l=o.data.split(" "),u=o.source;switch(l[0]){case"REGISTER":n.push(u),u.postMessage(["REGISTERED",encodeURIComponent(document.title||"Untitled"),e.slides.length].join(" "),"*"),r();break;case"FORWARD":e.next(),t=s(),r();break;case"BACK":e.prev(),t=s(),r();break;case"START":e.slide(0,{preview:!0}),t=0,r();break;case"END":e.slide(e.slides.length-1,{preview:!0}),t=0,r();break;case"SET_CURSOR":var f,a,c=l[1]||"1";if(c.indexOf(".")!==-1){var d=c.split(".",2).map(function(e){return~~e});f=d[0],a=d[1]}else f=~~c,a=0;a>0&&!i(f-1,a)&&(f+=1,a=0),f<1?f=1:f>e.slides.length&&(f=e.slides.length),e.slide(f-1,{preview:!0});for(var p=0;p<a;p++)e.next();t=a,r();break;case"GET_NOTES":var v=e.slides[e.slide()].querySelector("[role=note]"),b=v?encodeURIComponent(v.innerHTML):"";u.postMessage(["NOTES",b].join(" "),"*")}};e.on("destroy",function(){removeEventListener("message",l,!1)}),addEventListener("message",l,!1)}}},{}]},{},[1])(1)});